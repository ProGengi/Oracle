#
#
#
#

锁(lock)机制用来控制共享资源的并发访问。提供数据的完整性以及一致性。
在单用户中不需要锁机制。

阻塞
如果一个会话持有某个资源的锁，而另一个会话在请求这个资源，就会出现阻塞(blocking)

死锁(deadlock)
有两个会话，每个会话都想要对方的资源，就会产生死锁。
假如数据库有两张表A,B，每个表只有一行，有两个会话A,B。
现在，A更新A表，B更新B表。
(在没提交或回滚的情况下)
然后B又想更新A表，就会出现阻塞。
最后A又想更新B表就会出现死锁。

Oracle中一般不会出现死锁，通常都是人为地提供条件，才会出现。
1.外键没加索引，但是却更新主键。
2.表上的位图索引遭到并发更新。


锁类型：
1.DML
 TX锁(事务锁)
  事务开始时，就会获得一个事务锁，直到commit或者rollback。
  每个事务只会获得一个事务锁。
  锁定过程：
  1.找到想锁定的那一行。
  2.到达那一行。
  3.锁定那一行。(如果已经锁定了，就等待锁住的事务结束。)
 TM锁(DML Equence)
 用于修改表内容时，表的结构不会改变。
 每修改一个表
  
2.DDL
 DDL操作会自动为对象添加DDL锁，从而保护这些对象不会被其他会话修改。
 排他(exclusive)DDL锁
  这会防止其他会话得到他们自己的DDL锁TM(DML)锁
 共享(share)DDL锁
  这些锁会
 共享DDL锁
 
 
 
3.内部锁，闩
